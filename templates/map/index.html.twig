{% extends 'base.html.twig' %}

{% block stylesheets %}{% endblock %}

{% block body %}
	<div id="map" class="container-fluid">
		<h1>La Carte</h1>
		<div class="row">
			<div class="col-md-10 col-sm-12">
				<div class="map">
					{% if map is empty %}
						<div class="alert alert-warning">You are still on the firm ground, you have to load fixtures first !</div>
					{% endif %}
					{% for y in 0..6 %}
						<div class="row">
							{% for x in 0..12 %}
								{% if map[x][y] is defined %}
									<div class="tile col-1 {{ map[x][y].type }}">
										<div class="tile-name">{{ map[x][y].name ?? ' '}}</div>
										<div class="tile-name coords">{{ map[x][y].coordX }},{{ map[x][y].coordY }}</div>
										{% if boat.coordX == x and boat.coordY == y %}
											<img id="boat" class="boat img-fluid" src="{{ asset('build/images/boat.png') }}" alt="boat" loading="load"/>
										{% endif %}
									</div>
								{% endif %}
							{% endfor %}
						</div>
					{% endfor %}
				</div>
			</div>
			<div class="col-md-2 col-sm-12 navigation-infos">
				<div class="navigation">
					<h2>Navigation</h2>
					<p class="nav-infos">Vous pouvez utiliser les touches de votre clavier ou les boutons de la boussole.</p>
					<div class="compass">
						<div class="row">
							<a class="btn col-2" href="{{ path("moveDirectionBoat", { direction: "N"}) }}">N</a>
						</div>
						<div class="row middle">
							<a class="btn col-2" href="{{ path("moveDirectionBoat", { direction: "W"}) }}">O</a>
							<a class="btn col-2" href="{{ path("moveDirectionBoat", { direction: "E"}) }}">E</a>
						</div>
						<div class="row">
							<a class="btn col-2" href="{{ path("moveDirectionBoat", { direction: "S"}) }}">S</a>
						</div>
					</div>
				</div>
				<div class="infos">
					<h2>Information</h2>
					<div class="board">
						<p>Longitude :
							{{ boat.coordX }}</p>
						<p>Latitude :
							{{ boat.coordY }}</p>
						<div class="overlay-image">
						<img class="img-fluid" src="{{ asset('build/images/icon-help.png') }}" alt="indice" loading="lazy">
						<span class="overlay-text">"Le trésor est caché dans une île abandonnée...."</span>
						</div>
						<p></p>
					</div>
				</div>
			</div>
		</div>
	</div>
{% endblock %}

{% block javascripts %}
	{{ encore_entry_script_tags('map') }}
	<script>
		document.addEventListener('keydown', function (event) {
if (event.code === "ArrowUp") {
window.location.href = "/boat/direction/N";
} else if (event.code === "ArrowDown") {
window.location.href = "/boat/direction/S";
} else if (event.code === "ArrowLeft") {
window.location.href = "/boat/direction/W";
} else if (event.code === "ArrowRight") {
window.location.href = "/boat/direction/E";
}
})
	</script>
{% endblock %}
